<!-- Back Button -->
<a href="/borrowings" class="back-button">‚Üê Back to Borrowing Page</a>

<h1>Notifications History</h1>

<table>
  <thead>
    <tr>
      <th>Message</th>
      <th>Status</th>
      <th>Triggered At</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @notifications.each do |notification| %>
      <tr class="<%= notification.status %>" id="notification-<%= notification.id %>">
        <td>
          <div class="notification-message">
            <%= notification.message %>
          </div>
        </td>
        <td>
          <span class="notification-status"><%= notification.status.titleize %></span>
        </td>
        <td>
          <span class="notification-date"><%= notification.triggered_at.strftime("%B %d, %Y %H:%M") %></span>
        </td>
        <td>
          <% if notification.status != "delivered" && notification.notification_type == "Overdue" %>
            <%= button_to "Send to PIC", send_to_pic_notification_path(notification), 
                        method: :post, class: "btn btn-warning",
                        data: { confirm: "Are you sure you want to send this overdue notification?" } %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
