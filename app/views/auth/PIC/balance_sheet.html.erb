<!-- app/views/auth/PIC/balance_sheet.html.erb -->
<!DOCTYPE html>
<html>
<head>
  <title>Balance Sheet - PIC</title>
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>
</head>

<body>
  <%= render 'auth/PIC/sidebar' %>

  <!-- Total Expenses Section -->
  <div class="expenses-header">
    <div class="total-expenses">
      <h2>Total Club Expenses:</h2>
      <h1>
        <%= number_to_currency(@total_expenses, unit: "MYR ", precision: 2) %>
      </h1>
    </div>

    <!-- Date Range Selector -->
    <div class="date-range-selector">
      <%= form_with url: pic_balance_sheet_path, method: :get, local: true, class: "date-form" do |f| %>
        <%= f.select :date_range,
          options_for_select([
            ['Past Month', '1-month'],
            ['Past 6 Months', '6-months'],
            ['Past Year', '1-year'],
            ['All Time', 'all']
          ], selected: params[:date_range] || '1-month'),
          {}, { onchange: 'this.form.submit()' }
        %>
      <% end %>
    </div>
  </div>

  <!-- Page Title -->
  <h1>Balance Sheet</h1>

  <div class="main-content">
    <!-- Financial Records Table -->
    <table>
      <thead>
        <tr>
          <th>Name of Expense</th>
          <th>Equipment</th>
          <th>Quantity</th>
          <th>Amount</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody>
        <% @financial_records.each do |record| %>
          <tr>
            <td><%= record.Title %></td>
            <td><%= record.equipment&.Equipment_Name || "N/A" %></td>
            <td><%= record.Quantity %></td>
            <td><%= number_to_currency(record.Amount, unit: "RM ") %></td>
            <td><%= record.created_at.strftime("%d/%m/%Y") %></td>
          </tr>
        <% end %>
      </tbody>
    </table>

    <% if @financial_records.empty? %>
      <p>No financial records found for this club.</p>
    <% end %>
  </div>

</body>
</html>